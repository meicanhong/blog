<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>RAG 架构进化：从&quot;已死&quot;争议到 8 种实战路径 | Danny Blog</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="看见 思考 行动">
    
    <link rel="preload" href="/assets/css/0.styles.e2f08ea7.css" as="style"><link rel="preload" href="/assets/js/app.05c30905.js" as="script"><link rel="preload" href="/assets/js/3.2a1770ca.js" as="script"><link rel="preload" href="/assets/js/1.b21f7e85.js" as="script"><link rel="preload" href="/assets/js/46.9cdaaecf.js" as="script"><link rel="prefetch" href="/assets/js/10.0d87b634.js"><link rel="prefetch" href="/assets/js/11.2f3e3f7e.js"><link rel="prefetch" href="/assets/js/12.bc8ad885.js"><link rel="prefetch" href="/assets/js/13.19df2a29.js"><link rel="prefetch" href="/assets/js/14.e5bbe808.js"><link rel="prefetch" href="/assets/js/15.918479cc.js"><link rel="prefetch" href="/assets/js/16.f6126403.js"><link rel="prefetch" href="/assets/js/17.cb4cc8be.js"><link rel="prefetch" href="/assets/js/18.27eefc2f.js"><link rel="prefetch" href="/assets/js/19.6d5d19b1.js"><link rel="prefetch" href="/assets/js/20.a1186755.js"><link rel="prefetch" href="/assets/js/21.04666b00.js"><link rel="prefetch" href="/assets/js/22.f429ad32.js"><link rel="prefetch" href="/assets/js/23.0fff1064.js"><link rel="prefetch" href="/assets/js/24.968df843.js"><link rel="prefetch" href="/assets/js/25.d7d5d6da.js"><link rel="prefetch" href="/assets/js/26.1b4b6af4.js"><link rel="prefetch" href="/assets/js/27.15e3af17.js"><link rel="prefetch" href="/assets/js/28.0b7d432f.js"><link rel="prefetch" href="/assets/js/29.d4b59edd.js"><link rel="prefetch" href="/assets/js/30.cdc9fa4f.js"><link rel="prefetch" href="/assets/js/31.385fbf8b.js"><link rel="prefetch" href="/assets/js/32.7b9a0686.js"><link rel="prefetch" href="/assets/js/33.3f22ea56.js"><link rel="prefetch" href="/assets/js/34.b9b5bb0c.js"><link rel="prefetch" href="/assets/js/35.81676d68.js"><link rel="prefetch" href="/assets/js/36.74ea33b6.js"><link rel="prefetch" href="/assets/js/37.4a6896d2.js"><link rel="prefetch" href="/assets/js/38.5e4df999.js"><link rel="prefetch" href="/assets/js/39.4d610e3b.js"><link rel="prefetch" href="/assets/js/4.aa9d9f9f.js"><link rel="prefetch" href="/assets/js/40.11218ea1.js"><link rel="prefetch" href="/assets/js/41.0bb455c9.js"><link rel="prefetch" href="/assets/js/42.4c81b2a6.js"><link rel="prefetch" href="/assets/js/43.297bc98e.js"><link rel="prefetch" href="/assets/js/44.a0ed9447.js"><link rel="prefetch" href="/assets/js/45.9bcc9806.js"><link rel="prefetch" href="/assets/js/47.8259ff67.js"><link rel="prefetch" href="/assets/js/48.09487425.js"><link rel="prefetch" href="/assets/js/49.778e442c.js"><link rel="prefetch" href="/assets/js/5.b8f1876b.js"><link rel="prefetch" href="/assets/js/50.a21198c5.js"><link rel="prefetch" href="/assets/js/51.4cd81565.js"><link rel="prefetch" href="/assets/js/52.2244f389.js"><link rel="prefetch" href="/assets/js/53.5e915268.js"><link rel="prefetch" href="/assets/js/54.6d1c5178.js"><link rel="prefetch" href="/assets/js/55.b462259a.js"><link rel="prefetch" href="/assets/js/6.3a042769.js"><link rel="prefetch" href="/assets/js/7.c2fab5b5.js"><link rel="prefetch" href="/assets/js/8.03f273dd.js"><link rel="prefetch" href="/assets/js/9.4354e46a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e2f08ea7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>Danny Blog</h3> <p class="description" data-v-59e6cb88>看见 思考 行动</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>Danny</span>
          
        <!---->
        2026
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Danny Blog</span></a> <div class="links"><!----> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/Big-Data/" class="nav-link"><i class="undefined"></i>
  Big-Data
</a></li><li class="dropdown-item"><!----> <a href="/categories/Life/" class="nav-link"><i class="undefined"></i>
  Life
</a></li><li class="dropdown-item"><!----> <a href="/categories/Philosophy/" class="nav-link"><i class="undefined"></i>
  Philosophy
</a></li><li class="dropdown-item"><!----> <a href="/categories/Program/" class="nav-link"><i class="undefined"></i>
  Program
</a></li></ul></div></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><a href="/mythink/about_me.html" class="nav-link"><i class="undefined"></i>
  About Me
</a></div><div class="nav-item"><a href="https://github.com/meicanhong" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><img src="/avatar.jpg" alt="author-avatar" class="personal-img" data-v-1fad0c41> <h3 class="name" data-v-1fad0c41>
    Danny
  </h3> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>42</h3> <h6 data-v-1fad0c41>文章</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>19</h3> <h6 data-v-1fad0c41>标签</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/Big-Data/" class="nav-link"><i class="undefined"></i>
  Big-Data
</a></li><li class="dropdown-item"><!----> <a href="/categories/Life/" class="nav-link"><i class="undefined"></i>
  Life
</a></li><li class="dropdown-item"><!----> <a href="/categories/Philosophy/" class="nav-link"><i class="undefined"></i>
  Philosophy
</a></li><li class="dropdown-item"><!----> <a href="/categories/Program/" class="nav-link"><i class="undefined"></i>
  Program
</a></li></ul></div></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><a href="/mythink/about_me.html" class="nav-link"><i class="undefined"></i>
  About Me
</a></div><div class="nav-item"><a href="https://github.com/meicanhong" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>RAG 架构进化：从&quot;已死&quot;争议到 8 种实战路径</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>Danny</span>
          
        <!---->
        2026
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">RAG 架构进化：从&quot;已死&quot;争议到 8 种实战路径</h1> <div data-v-8a445198><i class="iconfont reco-account" data-v-8a445198><span data-v-8a445198>Danny</span></i> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>2026/1/6</span></i> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h1 id="rag-架构进化-从-已死-争议到-8-种实战路径"><a href="#rag-架构进化-从-已死-争议到-8-种实战路径" class="header-anchor">#</a> RAG 架构进化：从&quot;已死&quot;争议到 8 种实战路径</h1> <p>前阵子 Hacker News 上一篇《RAG 讣告：被智能体杀死，被上下文窗口埋葬》的文章炸翻了天，200 多个点赞，近 200 条评论。作者核心观点很直接：Claude 都有 200K token 了，Agent 用个 grep 就能检索，还要 RAG 干什么？</p> <p>说实话，看完这篇文章我第一反应是——这事儿没那么简单。</p> <h2 id="争议背后的盲区"><a href="#争议背后的盲区" class="header-anchor">#</a> 争议背后的盲区</h2> <p>评论区里有人立马反驳：grep 在几千个文件里找代码确实好使，但你见过企业级知识库动辄几百万份文档吗？这时候 grep 就成了大海捞针。更重要的是，grep 精确匹配&quot;供应链风险&quot;三个字，永远找不到讨论&quot;采购链依赖&quot;的文档。语义理解和精确匹配不是替代关系，是互补关系。</p> <p>还有一个容易被混淆的点：Agentic RAG 不是 RAG 的替代品，它就是 RAG 的一种形态。RAG 从来不是某个具体架构，而是一个原则——用检索来增强生成。至于怎么检索、什么时候检索，那是实现细节。</p> <p>所以&quot;RAG 已死&quot;这个论调，存在三个典型盲区：</p> <p><strong>成本和规模盲区</strong>：200K token 听着很多，但也就 15 万字左右。企业知识库几百万份文档，全塞进 prompt 成本不可接受，而且上下文过长会出现&quot;Lost in the Middle&quot;现象——中间信息模型压根记不住。</p> <p><strong>语义理解盲区</strong>：grep 的精确匹配在专业术语上很强，但语义查询是它的软肋。现在生产环境主流做法是混合检索（BM25 + 向量 + 重排序），两者各司其职。</p> <p><strong>概念混淆盲区</strong>：把 Agentic Search 当成 RAG 的替代是错的。Agentic RAG 本身就是 RAG 进化的一种形态，就像从骑自行车变成了开自动驾驶汽车，本质还是交通工具，但智能化程度完全不同。</p> <h2 id="_8-种架构-一条进化路径-不是选择题"><a href="#_8-种架构-一条进化路径-不是选择题" class="header-anchor">#</a> 8 种架构：一条进化路径，不是选择题</h2> <p>很多人把 8 种 RAG 架构当成选择题来纠结，其实这更像是一条进化路径。核心问题只有一个：你的检索系统需要多少&quot;智能&quot;？</p> <h3 id="naive-rag-起点-也是基础"><a href="#naive-rag-起点-也是基础" class="header-anchor">#</a> Naive RAG：起点，也是基础</h3> <p>流程像自来水管一样直白：文档切块 → 向量化 → 存入向量数据库 → 用户提问时检索相似块 → 喂给大模型生成答案。</p> <p>这个架构的问题很明显：检索结果不一定对，但大模型不会质疑，拿来就用。检索错了、文档不相关、或者截断位置不合适，这些缺陷都会直接影响最终答案。更糟糕的是，当检索质量很差时，大模型会开始&quot;创造性编造&quot;，产生幻觉。</p> <p>不过别嫌弃它简单。很多团队一开始就上 Graph 或 Agentic，结果出问题连瓶颈在哪都找不到。正确的做法是先跑通 Naive RAG，收集真实反馈，再针对性升级。</p> <p>实际实现时，你需要注意几个关键点：切块大小很重要，通常 512-1024 token 比较合适；重叠部分不能少，否则语义容易断开；向量数据库的选择也很有讲究，Milvus、Weaviate、Pinecone 各有优劣。</p> <h3 id="corrective-rag-加入质量控制"><a href="#corrective-rag-加入质量控制" class="header-anchor">#</a> Corrective RAG：加入质量控制</h3> <p>在 Naive 基础上加个&quot;质检员&quot;，这就是 Corrective RAG 的核心思想。系统会评估每个检索结果的质量，然后做三件事：相关的直接用，不相关的扔掉，模糊的精炼后再用。</p> <p>具体实现上，它引入了一个检索评估器（Retrieve Evaluator），对检索结果打分。如果分数高，说明检索质量好，直接进入生成环节；如果分数低，说明检索失败，系统会触发回退机制——要么重新查询，要么调用外部搜索引擎（比如 Google、Bing API）补充信息。</p> <p>这个架构在法律研究、合规审查这些高风险场景特别有用。试想一下，用户问一个法律条款的适用范围，Naive RAG 可能检索到错误的法律文件，导致错误答案。Corrective RAG 会先评估检索结果，发现相关性不够时主动去权威法律网站检索，确保答案准确。</p> <p>实现上可以用 LangChain 的 CRAG 模块，或者自己写一个评估器。关键在于评估标准的设计——相关性阈值设多少合适？回退机制触发几次？这些都需要根据实际业务调优。</p> <h3 id="self-rag-让模型学会反思"><a href="#self-rag-让模型学会反思" class="header-anchor">#</a> Self RAG：让模型学会反思</h3> <p>Self RAG 来自 2023 年的一篇论文，核心思想是让模型在生成过程中不断反思自己。模型会自我反思四个问题：需要检索吗？文档相关吗？答案有支撑吗？答案有用吗？</p> <p>具体实现上，它引入了特殊的&quot;反思 token&quot;：<code>IsRel</code>（文档相关吗？）、<code>IsSup</code>（答案有支撑吗？）、<code>IsUse</code>（答案有用吗？）。每个环节都有这些 token 打分，质量不达标就重来。比如检索到的文档相关性低，模型会触发 <code>IsRel:No</code> 标记，然后重新检索；生成的答案没有文档支撑，会触发 <code>IsSup:No</code>，然后重新生成。</p> <p>从&quot;无脑流水线&quot;到&quot;有自我意识的系统&quot;，这是 RAG 智能化的重要一步。根据研究数据，Self RAG 能降低 40-60% 的幻觉率，在需要高准确性的场景效果显著。</p> <p>代价是成本变高，生成速度变慢。毕竟每个环节都要打分、可能还要重来。如果你的场景容错率高、成本敏感，Naive RAG 可能更合适；如果是医疗诊断、金融分析这些高风险场景，Self RAG 的额外成本是值得的。</p> <p>训练 Self RAG 需要专门的标注数据——不是标注答案，而是标注反思 token 的正确性。这比标注答案更难，因为需要专家对每个环节的质量做判断。所以实际应用中，很多人会用现成的 Self RAG 模型，或者用提示词工程模拟反思过程。</p> <h3 id="multi-head-rag-多视角并行检索"><a href="#multi-head-rag-多视角并行检索" class="header-anchor">#</a> Multi-Head RAG：多视角并行检索</h3> <p>借鉴 Transformer 的多头注意力机制，Multi-Head RAG 对同一个问题用不同&quot;视角&quot;理解，并行检索后融合结果。</p> <p>举个例子，用户问&quot;苹果最近的表现如何&quot;。Naive RAG 可能只往一个方向检索，要么是科技公司要么是水果。Multi-Head RAG 会同时发起多个查询：一个是&quot;苹果公司的股价表现&quot;，一个是&quot;苹果公司的产品销量&quot;，还有一个可能是&quot;苹果水果的价格走势&quot;。最后根据上下文或者用户历史行为，判断用户真正想要什么。</p> <p>实现上，可以用查询改写（Query Rewriting）或者查询扩展（Query Expansion）技术。LlamaIndex 的 Multi-Vector Retriever、LangChain 的 MultiQuery Retriever 都能实现类似效果。</p> <p>这个架构解决了单一角度的盲区问题，适合查询意图模糊的场景。比如用户问&quot;如何优化性能&quot;，是数据库性能、前端性能、还是算法性能？Multi-Head RAG 会把各种可能性都检索一遍，然后融合结果。</p> <p>当然，延迟和成本都会上升。三个并发查询意味着三倍的检索成本，融合结果也需要额外的推理步骤。如果你的查询场景意图明确（比如客服系统，用户问题通常很具体），Naive RAG 可能更高效；如果是开放域问答、知识探索，Multi-Head RAG 会更合适。</p> <h3 id="graph-rag-知识图谱加持"><a href="#graph-rag-知识图谱加持" class="header-anchor">#</a> Graph RAG：知识图谱加持</h3> <p>Graph RAG 不再只是找相似文本块，而是理解文本块之间的关系。用户问&quot;ABC 公司的领导层有谁&quot;，Naive RAG 可能检索到一篇提到 CEO 的文档，但遗漏了其他高管。Graph RAG 会在知识图谱里遍历实体关系，精准定位所有领导层成员。</p> <p>核心思想是先把非结构化文本转化为结构化知识图谱：实体（人名、公司名、事件）作为节点，关系（属于、领导、投资）作为边。检索时不再是&quot;找相似文本&quot;，而是&quot;在图谱上推理&quot;。</p> <p>Microsoft Research 在 2024 年发布的 GraphRAG 用 Leiden 算法做层次社区检测，在大规模查询（约 100 万 tokens）上表现卓越。它把文档按照语义聚合成不同的&quot;社区&quot;，每个社区有自己的摘要和主题。用户问全局问题时（比如&quot;整个行业的主要趋势是什么&quot;），它能在社区层面推理，而不是纠结于单个文档碎片。</p> <p>构建知识图谱是 Graph RAG 的最大挑战。需要从文本中抽取实体和关系，这本身就是一个 NLP 难题。LLaMA、GPT 这些模型可以用来做实体抽取，但准确率很难保证，尤其是专业领域的实体识别（比如医疗术语、法律概念）。而且知识图谱更新困难——新增一个文档，可能要重新抽取、重新链接、重新计算社区结构。</p> <p>所以 Graph RAG 适合知识结构稳定、更新频率低的场景，比如历史研究、企业知识库。如果你的数据每天都在变（比如新闻、社交媒体），构建和维护知识图谱的成本可能超过收益。</p> <h3 id="agentic-rag-从管道到智能体"><a href="#agentic-rag-从管道到智能体" class="header-anchor">#</a> Agentic RAG：从管道到智能体</h3> <p>这是当前最前沿的形态，也是争议最大的地方。系统从被动管道变成主动智能体，能分解复杂问题、选择合适工具、迭代检索推理，直到满意为止。</p> <p>举个具体例子。用户问&quot;我们公司去年在云服务上的支出是多少，今年能优化多少&quot;。Naive RAG 可能检索几篇关于云成本优化的文档，然后给出一个泛泛的建议。Agentic RAG 会这样处理：</p> <ol><li>分解问题：支出查询 + 优化分析</li> <li>支出查询：选择 SQL 工具，查询财务数据库</li> <li>优化分析：检索云成本优化文档，结合当前支出结构分析</li> <li>可能还需要调用 Calculator 计算优化比例</li> <li>最终综合所有信息，给出具体答案</li></ol> <p>LlamaIndex 有句名言：&quot;Naive RAG 已死，智能体检索万岁&quot;。关键不是检索不检索，而是谁来决定何时检索、检索什么、用什么工具检索。</p> <p>Agentic RAG 的核心组件包括：规划器（Planner，分解问题）、工具集（Tools，SQL、API、搜索引擎）、执行器（Executor，按计划执行）、反思器（Reflector，评估结果质量）。这些组件可以用 LangChain 的 Agent 框架、AutoGPT、或者自己编排。</p> <p>当然，代价也很明显：延迟高、不可预测、成本高。一个复杂问题可能触发十几次工具调用，每次都是一次推理成本。而且 Agent 的行为很难预测——它会选择什么工具？会迭代几次？这些都不像 Naive RAG 那样可控。</p> <p>所以 Agentic RAG 适合复杂任务编排、多工具协作的场景。如果你的问题是简单问答（比如&quot;年假政策是什么&quot;），Naive RAG 足够了；如果需要多步推理、动态决策，Agentic RAG 的价值才体现出来。</p> <h3 id="adaptive-rag-自适应策略"><a href="#adaptive-rag-自适应策略" class="header-anchor">#</a> Adaptive RAG：自适应策略</h3> <p>Adaptive RAG 的核心是&quot;路由比架构更重要&quot;。不是所有问题都需要检索，简单查询直接用 LLM 反而更快更便宜。</p> <p>根据问题类型动态调整策略：简单事实问题（比如&quot;公司地址在哪&quot;）直接回答；多步推理问题（比如&quot;为什么上季度营收下降&quot;）迭代检索；开放问题（比如&quot;帮我写个行业分析&quot;）多轮检索扩展加创造性生成。</p> <p>实现上，Adaptive RAG 有一个路由器（Router），先分析问题类型，然后选择合适的处理策略。路由器本身可以是一个分类模型，或者用 LLM 做意图识别。LlamaIndex 的 Router Retriever、LangChain 的 Agent Executor 都能实现类似效果。</p> <p>这个架构的优势是成本优化。简单问题跳过检索，直接用 LLM 的内置知识，节省了向量检索的延迟和成本。复杂问题才启动完整流程，避免&quot;大炮打蚊子&quot;。</p> <p>实际应用中，路由策略的设计很关键。路由太敏感，所有问题都走检索，成本下不来；路由太迟钝，该检索的不检索，答案质量下降。需要根据实际业务数据调优，监控不同路由的准确率和成本。</p> <h3 id="sfr-rag-工业级封装"><a href="#sfr-rag-工业级封装" class="header-anchor">#</a> SFR RAG：工业级封装</h3> <p>SFR RAG（Sophisticated Fine-tuned RAG）把各种技术组件打包成工业级方案，整合了高质量 embedding、重排序、上下文压缩、引用生成、质量验证等最佳实践。</p> <p>高质量 embedding 是基础。OpenAI 的 text-embedding-3、Cohere 的 embed、或者自己 fine-tune 的领域 embedding，直接影响检索质量。通用 embedding 在专业领域表现差，比如医疗、法律，用领域数据 fine-tune 能显著提升效果。</p> <p>重排序（Reranking）是关键。初次检索可能召回 100 个结果，但只有前几个真正相关。重排序模型（比如 Cohere Rerank、BGE Reranker）会对这 100 个结果重新打分，选出最相关的 5-10 个。生产数据显示，重排序能提升 15-30% 的检索准确率。</p> <p>上下文压缩（Context Compression）解决&quot;噪音太多&quot;的问题。检索到的文档可能很长，只有一小段真正相关。压缩模块会提取相关片段，去掉冗余信息，既节省 token 又提升质量。</p> <p>引用生成（Citation）是信任的基础。答案要标明来源，用户才能验证。SFR RAG 会自动生成引用链接，比如&quot;根据《员工手册》第三章第二节&quot;。这在法律、医疗、金融这些需要可追溯性的场景尤其重要。</p> <p>质量验证（Quality Check）是最后一步。生成答案后，系统会自动检查：答案是否回应了问题？是否有文档支撑？逻辑是否自洽？质量不达标的答案会被拦截或要求重新生成。</p> <p>这些技术可以单独用，但组合起来效果最好。SFR RAG 就是把这些最佳实践打包成一个端到端的系统，适合不想重复造轮子的团队。LangChain、LlamaIndex 都有现成的 SFR 实现，或者用 LangSmith、DeepEval 这些工具搭建自己的质量验证体系。</p> <h2 id="两个进化维度"><a href="#两个进化维度" class="header-anchor">#</a> 两个进化维度</h2> <p>看完整条路径，你会发现 RAG 的进化其实沿着两个维度：</p> <p><strong>系统智能度</strong>：从无脑执行 → 质量控制 → 自我反思 → 自由决策</p> <p><strong>知识结构复杂度</strong>：从简单文本块 → 多视角融合 → 知识图谱 → 智能体协作</p> <p>选型的时候问自己四个问题：知识库多大？问题多复杂？容错空间多大？预算多少？答案自然就出来了。</p> <h2 id="实践中的三个坑"><a href="#实践中的三个坑" class="header-anchor">#</a> 实践中的三个坑</h2> <p>聊完架构，说点实战经验。</p> <p><strong>坑一：过度工程化</strong></p> <p>很多团队一开始就上 GraphRAG 或 Agentic 多模态，结果发现问题都找不到在哪。正确的做法是先跑通 Naive RAG，收集真实业务问题作为评测基准，每个新架构上线前都用这些问题盲评打分。这比看任何公开 Benchmark 都有用。</p> <p><strong>坑二：忽视检索质量</strong></p> <p>检索是 RAG 的天花板，生成只是在天花板下装修。如果检索系统没拿到准确文档，再好的提示词工程也救不了。生产环境推荐混合检索（BM25 + 向量 + 重排序），能提升 15-25% 的准确率。</p> <p><strong>坑三：缺少评测体系</strong></p> <p>准备 10-20 个真实业务问题，定期用这些问题测试系统表现。没有评测体系，失败只在用户投诉时暴露，那时候就太晚了。</p> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p>RAG 不是死了，是进化了。Naive RAG 确实在退出舞台，但 Agentic Retrieval 才刚开始。</p> <p>记住三点：先跑通基础流程再逐步加料，关注检索质量而不是生成技巧，建立自己的评测体系。</p> <p>架构选择没有银弹，关键是理解问题本质。大多数业务问题用 Basic RAG 或 Two-Step RAG 就能解决，别被潮流带着跑。实现价值，而非实现潮流。</p></div></section> <footer class="page-edit"><!----> <!----></footer> <!----> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/program/RAG%E6%9E%B6%E6%9E%84%E8%BF%9B%E5%8C%96-%E4%BB%8E%E4%BA%89%E8%AE%AE%E5%88%B0%E5%AE%9E%E8%B7%B5.html#争议背后的盲区" class="sidebar-link reco-side-争议背后的盲区" data-v-b57cc07c>争议背后的盲区</a></li><li class="level-2" data-v-b57cc07c><a href="/program/RAG%E6%9E%B6%E6%9E%84%E8%BF%9B%E5%8C%96-%E4%BB%8E%E4%BA%89%E8%AE%AE%E5%88%B0%E5%AE%9E%E8%B7%B5.html#_8-种架构-一条进化路径-不是选择题" class="sidebar-link reco-side-_8-种架构-一条进化路径-不是选择题" data-v-b57cc07c>8 种架构：一条进化路径，不是选择题</a></li><li class="level-3" data-v-b57cc07c><a href="/program/RAG%E6%9E%B6%E6%9E%84%E8%BF%9B%E5%8C%96-%E4%BB%8E%E4%BA%89%E8%AE%AE%E5%88%B0%E5%AE%9E%E8%B7%B5.html#naive-rag-起点-也是基础" class="sidebar-link reco-side-naive-rag-起点-也是基础" data-v-b57cc07c>Naive RAG：起点，也是基础</a></li><li class="level-3" data-v-b57cc07c><a href="/program/RAG%E6%9E%B6%E6%9E%84%E8%BF%9B%E5%8C%96-%E4%BB%8E%E4%BA%89%E8%AE%AE%E5%88%B0%E5%AE%9E%E8%B7%B5.html#corrective-rag-加入质量控制" class="sidebar-link reco-side-corrective-rag-加入质量控制" data-v-b57cc07c>Corrective RAG：加入质量控制</a></li><li class="level-3" data-v-b57cc07c><a href="/program/RAG%E6%9E%B6%E6%9E%84%E8%BF%9B%E5%8C%96-%E4%BB%8E%E4%BA%89%E8%AE%AE%E5%88%B0%E5%AE%9E%E8%B7%B5.html#self-rag-让模型学会反思" class="sidebar-link reco-side-self-rag-让模型学会反思" data-v-b57cc07c>Self RAG：让模型学会反思</a></li><li class="level-3" data-v-b57cc07c><a href="/program/RAG%E6%9E%B6%E6%9E%84%E8%BF%9B%E5%8C%96-%E4%BB%8E%E4%BA%89%E8%AE%AE%E5%88%B0%E5%AE%9E%E8%B7%B5.html#multi-head-rag-多视角并行检索" class="sidebar-link reco-side-multi-head-rag-多视角并行检索" data-v-b57cc07c>Multi-Head RAG：多视角并行检索</a></li><li class="level-3" data-v-b57cc07c><a href="/program/RAG%E6%9E%B6%E6%9E%84%E8%BF%9B%E5%8C%96-%E4%BB%8E%E4%BA%89%E8%AE%AE%E5%88%B0%E5%AE%9E%E8%B7%B5.html#graph-rag-知识图谱加持" class="sidebar-link reco-side-graph-rag-知识图谱加持" data-v-b57cc07c>Graph RAG：知识图谱加持</a></li><li class="level-3" data-v-b57cc07c><a href="/program/RAG%E6%9E%B6%E6%9E%84%E8%BF%9B%E5%8C%96-%E4%BB%8E%E4%BA%89%E8%AE%AE%E5%88%B0%E5%AE%9E%E8%B7%B5.html#agentic-rag-从管道到智能体" class="sidebar-link reco-side-agentic-rag-从管道到智能体" data-v-b57cc07c>Agentic RAG：从管道到智能体</a></li><li class="level-3" data-v-b57cc07c><a href="/program/RAG%E6%9E%B6%E6%9E%84%E8%BF%9B%E5%8C%96-%E4%BB%8E%E4%BA%89%E8%AE%AE%E5%88%B0%E5%AE%9E%E8%B7%B5.html#adaptive-rag-自适应策略" class="sidebar-link reco-side-adaptive-rag-自适应策略" data-v-b57cc07c>Adaptive RAG：自适应策略</a></li><li class="level-3" data-v-b57cc07c><a href="/program/RAG%E6%9E%B6%E6%9E%84%E8%BF%9B%E5%8C%96-%E4%BB%8E%E4%BA%89%E8%AE%AE%E5%88%B0%E5%AE%9E%E8%B7%B5.html#sfr-rag-工业级封装" class="sidebar-link reco-side-sfr-rag-工业级封装" data-v-b57cc07c>SFR RAG：工业级封装</a></li><li class="level-2" data-v-b57cc07c><a href="/program/RAG%E6%9E%B6%E6%9E%84%E8%BF%9B%E5%8C%96-%E4%BB%8E%E4%BA%89%E8%AE%AE%E5%88%B0%E5%AE%9E%E8%B7%B5.html#两个进化维度" class="sidebar-link reco-side-两个进化维度" data-v-b57cc07c>两个进化维度</a></li><li class="level-2" data-v-b57cc07c><a href="/program/RAG%E6%9E%B6%E6%9E%84%E8%BF%9B%E5%8C%96-%E4%BB%8E%E4%BA%89%E8%AE%AE%E5%88%B0%E5%AE%9E%E8%B7%B5.html#实践中的三个坑" class="sidebar-link reco-side-实践中的三个坑" data-v-b57cc07c>实践中的三个坑</a></li><li class="level-2" data-v-b57cc07c><a href="/program/RAG%E6%9E%B6%E6%9E%84%E8%BF%9B%E5%8C%96-%E4%BB%8E%E4%BA%89%E8%AE%AE%E5%88%B0%E5%AE%9E%E8%B7%B5.html#总结" class="sidebar-link reco-side-总结" data-v-b57cc07c>总结</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/assets/js/app.05c30905.js" defer></script><script src="/assets/js/3.2a1770ca.js" defer></script><script src="/assets/js/1.b21f7e85.js" defer></script><script src="/assets/js/46.9cdaaecf.js" defer></script>
  </body>
</html>
