(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{497:function(t,s,a){"use strict";a.r(s);var n=a(2),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"how-to-build-a-more-fast-and-stable-crawler"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#how-to-build-a-more-fast-and-stable-crawler"}},[t._v("#")]),t._v(" How to build a more fast and stable crawler")]),t._v(" "),s("h2",{attrs:{id:"_1-ä¸è¦é‡å¤é€ è½®å­"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-ä¸è¦é‡å¤é€ è½®å­"}},[t._v("#")]),t._v(" #1 ä¸è¦é‡å¤é€ è½®å­")]),t._v(" "),s("p",[t._v("RSSHub æ˜¯ä¸€ä¸ªå¼€æºçš„ RSS è®¢é˜…æœåŠ¡ï¼Œæœ‰å¾ˆå¤šå¼€å‘è€…åœ¨ä¸Šé¢å¼€å‘äº†å„ç§å„æ ·çš„è®¢é˜…æºï¼Œæ¯”å¦‚ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("twitter")]),t._v(" "),s("li",[t._v("youtube")]),t._v(" "),s("li",[t._v("çŸ¥ä¹")]),t._v(" "),s("li",[t._v("è±†ç“£")]),t._v(" "),s("li",[t._v("ç­‰ç­‰")])]),t._v(" "),s("p",[t._v("è¿™äº›éƒ½æ˜¯é«˜è´¨é‡çš„æ•°æ®æºï¼Œå¦‚æœè‡ªå·±ä»å¤´å¼€å§‹å†™ï¼Œä¸ä»…æµªè´¹æ—¶é—´ï¼Œè€Œä¸”è´¨é‡è¿˜å¯èƒ½ä¸å¦‚è¿™äº›ç°æˆçš„ã€‚æˆ‘ä»¬åªéœ€è¦å†™ç¨‹åºå»æ¥æ”¶ç»Ÿä¸€çš„ RSS è®¢é˜…æºè¿”å›çš„æ•°æ®ï¼Œç„¶åè¿›è¡Œå¤„ç†ï¼Œå°±å¯ä»¥å¿«é€Ÿè·å–å„ä¸ªå¹³å°çš„æ•°æ®ã€‚")]),t._v(" "),s("p",[t._v("æ‹¿Twitterä¸¾ä¾‹ï¼Œæˆ‘ä»¬åªéœ€è¦æä¾› Twitter Cookie é…ç½®åˆ° RSSHub ä¸­ï¼Œè®¿é—® RSSHub çš„ API "),s("code",[t._v("http://localhost:1200/twitter/user/yihui_indie")]),t._v(" å°±å¯ä»¥è·å–åˆ° Twitter ç”¨æˆ· yihui_indie çš„æ¨æ–‡ã€‚")]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[t._v("<item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("\n<title"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("Re @boo_hz å“ˆå“ˆå“ˆï¼Œå…¶å®æ˜¯æœ‰çš„ã€‚ä½†ç®¡ä»–å‘¢ğŸ˜¬</title"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("\n<description"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("Re @boo_hz å“ˆå“ˆå“ˆï¼Œå…¶å®æ˜¯æœ‰çš„ã€‚ä½†ç®¡ä»–å‘¢ğŸ˜¬</description"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("\n<link"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("https"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//x.com/yihui_indie/status/1870409487733149905</link"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v('\n<guid isPermaLink="false"'),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("https"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//twitter.com/yihui_indie/status/1870409487733149905</guid"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("\n<pubDate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("Sat"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 21 Dec 2024 10"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("02"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("27 GMT</pubDate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("\n<author"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("ç† è¾‰ Indie</author"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("\n</item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("\n\n<item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("\n<title"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("Re @hixiaoji ä¼°è®¡ä¹Ÿæ˜¯ä½ æ”¶åˆ°äº§å“å»ºè®®æœ€å¤šçš„ä¸€æ¡åŠ¨æ€å§ğŸ¤£</title"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("\n<description"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("Re @hixiaoji ä¼°è®¡ä¹Ÿæ˜¯ä½ æ”¶åˆ°äº§å“å»ºè®®æœ€å¤šçš„ä¸€æ¡åŠ¨æ€å§ğŸ¤£</description"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("\n<link"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("https"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//x.com/yihui_indie/status/1870335626970866059</link"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v('\n<guid isPermaLink="false"'),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("https"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//twitter.com/yihui_indie/status/1870335626970866059</guid"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("\n<pubDate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("Sat"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 21 Dec 2024 05"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("08"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("57 GMT</pubDate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("\n<author"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("ç† è¾‰ Indie</author"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("\n</item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("\n")])])]),s("h2",{attrs:{id:"_2-å€ŸåŠ©llmå®Œæˆæ•°æ®å¤„ç†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-å€ŸåŠ©llmå®Œæˆæ•°æ®å¤„ç†"}},[t._v("#")]),t._v(" #2 å€ŸåŠ©LLMå®Œæˆæ•°æ®å¤„ç†")]),t._v(" "),s("p",[t._v("æˆ‘ä»¬è·å–ä¸€ä¸ªå¹³å°çš„æ•°æ®å†…å®¹ï¼Œé€šå¸¸éœ€è¦å¯¹é½å¹³å°è¿›è¡Œç‰¹åˆ¶åŒ–å¤„ç†ï¼Œæ¯”å¦‚ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("æ‹›è˜å¹³å°éœ€è¦æå–å‡ºèŒä½åç§°ã€èŒä½é“¾æ¥ã€èŒä½å‘å¸ƒæ—¶é—´ã€èŒä½å…¬å¸ã€èŒä½åœ°ç‚¹ã€èŒä½è–ªèµ„ã€èŒä½è¦æ±‚ç­‰")]),t._v(" "),s("li",[t._v("çŸ¥ä¹éœ€è¦æå–å‡ºå›ç­”å†…å®¹ã€å›ç­”é“¾æ¥ã€å›ç­”å‘å¸ƒæ—¶é—´ã€å›ç­”ä½œè€…ã€å›ç­”ç‚¹èµæ•°ã€å›ç­”è¯„è®ºæ•°ç­‰")]),t._v(" "),s("li",[t._v("ç­‰ç­‰")])]),t._v(" "),s("p",[t._v("ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ browserless å¾ˆè½»æ¾å¯ä»¥è·å–ç½‘é¡µçš„æºæ•°æ®(åŒ…è£¹HTMLçš„æ•°æ®å†…å®¹)ï¼Œç„¶åé€šè¿‡ bs4 å»é™¤é‡Œé¢æ— ç”¨çš„æ ‡ç­¾ï¼Œå¯ä»¥è·å¾—ä¸€ä»½å¹²å‡€ç®€çŸ­çš„HTMLæ•°æ®ã€‚è¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥å°†è¿™ä»½æ•°æ®äº¤ç»™LLMï¼Œè®©LLMä»ä¸­æå–å‡ºæˆ‘ä»¬é¢„æœŸçš„ struct æ•°æ®ã€‚")]),t._v(" "),s("p",[t._v("ä¸¾ä¾‹ï¼šæˆ‘æƒ³è¦è·å– https://gmgn.ai/trade?chain=sol&tab=smart_degen çš„èªæ˜é’±æ•°æ®ï¼Œæˆ‘ä¼šåˆ©ç”¨ firecrawl çš„ crawl api å®Œæˆè¿™ä¸ªä»»åŠ¡")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GmgnTokenInfo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("BaseModel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),t._v("\n    volume"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),t._v("\n    holders"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),t._v("\n    volume_1h"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),t._v("\n    price"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),t._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GmgnTokenInfoList")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("BaseModel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    tokens"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("list")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("GmgnTokenInfo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("crawl_gmgn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    app "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" firecrawl_app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    data "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scrape_url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://gmgn.ai/?chain=sol"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'formats'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'extract'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'extract'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'schema'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" GmgnTokenInfoList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("model_json_schema"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("json"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dumps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" indent"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("è¾“å‡º")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"tokens"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"GOBLY"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"volume"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"$6.3K"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"holders"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"28,202"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"volume_1h"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"7.3K"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"price"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"$0.0\\u20856389"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"USACOIN"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"volume"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"$11.4M"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"holders"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"21,530"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"volume_1h"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"472.1K"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"price"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"$0.0114"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            ...\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("è¿™é‡Œæˆ‘ç”¨åˆ°äº† firecrawl å·¥å…·ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¼ºå¤§çš„çˆ¬è™«å·¥å…·ï¼Œå®ƒå¯ä»¥è·å–ä»»æ„ç½‘é¡µçš„æ•°æ®å†…å®¹ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨å®ƒçš„ extract åŠŸèƒ½ï¼Œå°† "),s("code",[t._v("GmgnTokenInfoList")]),t._v(" çš„ç»“æ„ä¸¢ç»™å®ƒï¼Œfirecrwal èƒŒåå…¶å®æ˜¯è°ƒç”¨ LLM å®Œæˆæ•°æ®æå–ã€‚")]),t._v(" "),s("p",[t._v("firecrawl scrape è¯¦æƒ…å¯ä»¥å‚è€ƒï¼šhttps://docs.firecrawl.dev/v1-welcome#extract-format")]),t._v(" "),s("h3",{attrs:{id:"_2024-12-28-æ›´æ–°"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2024-12-28-æ›´æ–°"}},[t._v("#")]),t._v(" 2024-12-28 æ›´æ–°")]),t._v(" "),s("p",[t._v("firecrawl ç›®å‰ extract æ¨¡å¼ä¸å¤ªç¨³å®šï¼Œæ‰€ä»¥è¿˜æ˜¯æ¨èè‡ªå·±å†™ agent å®Œæˆæ•°æ®æå–ã€‚\nä»¥ä¸‹æ˜¯æˆ‘å†™çš„ä¸€ä¸ªä» content ä¸­æå–å‡º struct çš„ agent ç¤ºä¾‹ï¼š")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" json\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" typing "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Any"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Dict\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" structlog\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" src"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("util"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("openai_util "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" query_llm\n\nlogger "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" structlog"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get_logger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("extract_structured_data")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    content"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" schema"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Dict"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Any"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Dict"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Any"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("not")]),t._v(" content"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("strip"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("or")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("not")]),t._v(" schema"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("raise")]),t._v(" ValueError"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Content and schema cannot be empty"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Construct the extraction prompt")]),t._v("\n    prompt "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string-interpolation"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"""\nPlease extract information from the following text and format it according to the schema.\nRespond ONLY with a valid JSON object matching the schema structure.\n\nText content:\n')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("content"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\n\nRequired schema:\n")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("json"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dumps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("schema"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" indent"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('\n\nRules:\n1. Extract all relevant information that matches the schema\n2. Use null for missing values\n3. Strictly follow the schema structure\n4. Return only the JSON object, no additional text\n"""')])]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Query LLM with JSON response format")]),t._v("\n        response "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" query_llm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("query"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("prompt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" response_json"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Parse and validate the response")]),t._v("\n        extracted_data "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" json"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("loads"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" extracted_data\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("except")]),t._v(" json"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("JSONDecodeError"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("raise")]),t._v(" Exception"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Failed to parse LLM response as JSON"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("except")]),t._v(" Exception "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("raise")]),t._v(" Exception"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string-interpolation"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"Data extraction failed: ')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" __name__ "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"__main__"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" asyncio\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ç¤ºä¾‹æ–‡æœ¬å’Œæ¨¡å¼")]),t._v("\n    text_content "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""\n    John Doe is a software engineer at Tech Corp.\n    He has 5 years of experience and specializes in Python and JavaScript.\n    Contact: john.doe@email.com\n    """')]),t._v("\n\n    schema "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"string"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"occupation"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"string"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"company"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"string"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"years_of_experience"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"number"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"skills"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"string"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"contact"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"email"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"string"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æå–æ•°æ®")]),t._v("\n    result "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" asyncio"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("run"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("extract_structured_data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("text_content"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" schema"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);